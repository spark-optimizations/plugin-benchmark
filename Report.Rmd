---
title: "Spark Join Optimizations"
author: "Shabbir Hussain, Manthan Thakar, Tirthraj Parmar"
date: "December 5, 2017"
output:
  html_document:
    df_print: paged
  pdf_document:
    fig_crop: no
    fig_width: 5
    latex_engine: xelatex
geometry: left=1cm,right=1cm,top=1cm,bottom=2cm
---

# Objective

Optimizing Spark joins on Resilient Distributed Datasets (RDDs) by employing column-pruning and / or broadcast join wherever appropriate.

# Join Optimization

Join operation on RDDs can be expensive. We suspect that one of the biggest factors that affects join performance is the amount of data shuffled in the process. In order to alleviate excessive shuffling of data, we propose and implement two types of optimizations, namely, **Column Pruning** and **Broadcast Join**. In the following sections, we discuss both of these approaches and present our findings.

## Optimization 1: Column Pruning

**Hypothesis**: Pruning unused columns of an RDD before performing a join reduces the amount of data being shuffled for join and improves join performance 

Although there is no concept of columns in RDDs, by columns we mean values in a PairRDD.

To perform column pruning, following key information is required:

- **Target RDDs** RDDs (target RDDs) on which join is being performed

- **Column Usage** The columns from each RDD that are used after join in the program

### Benchmarks

## Optimization 2: Broadcast Join

**Hypothesis**: Out of two RDDs on which join is to be performed, if at least one RDD can fit in memory, then broadcasting the small RDD to all the nodes reduces the amount of data being shuffled for join and improves join performance

### Approach

### Benchmarks

```{r setup, echo=F, results='hide', message=F, warning=F, cache=F}
library("ggplot2")
library("tidyr")
library("knitr")
library("kableExtra")
library("scales")
library("plyr")
library("microbenchmark")
library("reshape2")
library("readr")
library("tm")
library("SnowballC")
library("wordcloud")
library("RColorBrewer")
library("grid")
library("gridBase")
library("gridExtra")
library("dplyr")
```
